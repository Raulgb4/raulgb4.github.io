---
import "../styles/global.css";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import BackToTop from "../components/BackToTop.astro";

const { lang = "en" } = Astro.props;
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>ðŸ‘¤ RaÃºl GarcÃ­a Balongo</title>
  </head>
  <body class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white">
    <Navbar lang={lang} />

    <main>
      <slot />
    </main>

    <Footer lang={lang} />
    <BackToTop />

    <script is:inline>
      const els = document.querySelectorAll("[data-reveal]");

      const io = new IntersectionObserver(
        (entries) => {
          for (const entry of entries) {
            if (!entry.isIntersecting) continue;

            const el = entry.target;
            const delay = Number(el.getAttribute("data-delay") || "0");
            el.style.setProperty("--reveal-delay", `${delay}ms`);
            el.classList.add("is-visible");

            const once = el.getAttribute("data-once") === "true";
            if (once) io.unobserve(el);
          }
        },
        { threshold: 0.08, rootMargin: "0px 0px -15% 0px" },
      );

      els.forEach((el) => io.observe(el));
    </script>
  </body>
</html>
